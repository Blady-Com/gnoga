<!doctype HTML>
<HTML>
   <HEAD>
      <meta http-equiv="Pragma" content="no-cache">
      <meta http-equiv="Expires" content="-1">
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <script src="/js/jquery.min.js"></script>
   </HEAD>
<BODY>
</BODY>
<script>
  var ws;
  var params={};
  var gnoga={};

  $( document ).ready(function() {
     var s = document.location.search;
     var tokens;
     var r = /[?&]?([^=]+)=([^&]*)/g;
     
     s = s.split("+").join(" ");

     while (tokens = r.exec(s)) {
        params[decodeURIComponent(tokens[1])]
           = decodeURIComponent(tokens[2]);
     }

     var adr = "ws://" + location.hostname;
     if (location.port != "") { adr = adr + ":" + location.port; }
     adr = adr + "/gnoga";

     ws = new WebSocket (adr);
  
     if (ws != null) {
        ws.onmessage = function (event) {
           try {
              console.log ("eval data = " + event.data);
              eval (event.data);
           } catch (e) {           
              console.error (e.message);
           }
        }
        ws.onerror = function (event) {
           alert ("Communication error");
        }
        ws.onclose = function (event) {
           if (gnoga['html_on_close'] != "") {
              $(document.body).html(gnoga['html_on_close']);
           } else {
              alert ("Server connection lost " + event.reason);
           }
        }
     } else {
        alert ("Websocket connection is required.");
     }
  });
</script>
<!--@@data.push_params@@-->
</HTML>
